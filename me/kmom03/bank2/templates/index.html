{% include 'header.html' %}

<div class="container" role="main">
    <div class="page-header">
        <h1>Account overview</h1>
    </div>
    <div class="content">
        <div>
            <a href="{{ url_for('add', what="person")}}">+Person</a>&nbsp
            <a href="{{ url_for('add', what="account")}}">+Account</a>
        <div>
        <table class="table">
            <thead>
              <tr>
                <th scope="col">#id</th>
                <th scope="col">Holders</th>
                <th scope="col">Current Balance</th>
                <th scope="col">Account Type</th>
              </tr>
            </thead>
            <tbody>
                {% for account in accounts %}
                    <tr>
                        <td style="text-align:right">
                            <a href="{{ url_for('account', account_id=account.id_)}}">
                                {{ account.id_ }}
                            </a>
                        </td>
                        <td>
                        # set ns = namespace(first=true)
                        # for holder in account.holders
                        #   if not ns.first
                                {{ "," }}
                        #   endif
                        #   set ns.first = false
                        #   for customer in customers if customer.id_ == holder
                                {{ customer.name }}
                        #   endfor
                        # endfor
                        </td>
                        <td style="text-align:right">{{ account.balance | round(2) }}</td>
                        <td>{{ account.type_ }}</td>
                    </tr>
                {% endfor %}
            </tbody>
          </table>
    </div>
</div>

{% include 'footer.html' %}
